(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d78f621"],{"0b01e":function(e,t,s){e.exports=s.p+"img/f.1a333dd0.png"},b5d8:function(e,t,s){},cb48:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-login"},[t("div",{staticClass:"page-login--layer"},[t("div",{staticClass:"page-login--content",staticStyle:{background:"#0b1322"},attrs:{flex:"dir:top main:justify cross:stretch box:justify"}},[t("div",{staticClass:"page-login--content-main",attrs:{flex:"dir:top main:center cross:center;"}},[e._m(0),t("div",{staticClass:"page-login--form"},[t("el-card",{attrs:{shadow:"never"}},[t("br"),t("br"),t("br"),t("br"),t("br"),t("el-form",{ref:"loginForm",attrs:{"label-position":"top",rules:e.rules,model:e.formLogin,size:"default"}},[t("br"),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{type:"text",placeholder:"账号"},model:{value:e.formLogin.username,callback:function(t){e.$set(e.formLogin,"username",t)},expression:"formLogin.username"}},[t("i",{staticClass:"el-icon-user",staticStyle:{color:"#fff"},attrs:{slot:"prepend"},slot:"prepend"})])],1),t("br"),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}},[t("i",{staticClass:"fa fa-keyboard-o",staticStyle:{color:"#fff"},attrs:{slot:"prepend"},slot:"prepend"})])],1),t("br"),t("p",[t("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")])],1),t("br"),t("br"),t("el-button",{staticClass:"button-login",staticStyle:{background:"#0db8ba",color:"white",border:"none !important","font-size":"16px"},attrs:{size:"default"},on:{click:e.submit}},[e._v(" 登 录 ")])],1)],1),t("p",{staticClass:"page-login--options",attrs:{flex:"main:justify cross:center"}},[t("span",{on:{click:e.forgetPwd}},[t("d2-icon",{attrs:{name:"question-circle"}}),e._v(" 忘记密码")],1),t("span",{on:{click:e.registerUser}},[e._v("注册用户")])])],1)]),e._m(1)])]),t("el-dialog",{attrs:{title:"快速选择用户",visible:e.dialogVisible,width:"400px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-row",{staticStyle:{margin:"-20px 0px -10px 0px"},attrs:{gutter:10}},e._l(e.users,(function(s,i){return t("el-col",{key:i,attrs:{span:8}},[t("div",{staticClass:"page-login--quick-user",on:{click:function(t){return e.handleUserBtnClick(s)}}},[t("d2-icon",{attrs:{name:"user-circle-o"}}),t("span",[e._v(e._s(s.name))])],1)])})),1)],1)],1)},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"smind_left"},[t("img",{staticClass:"v_video",attrs:{src:s("0b01e")}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-login--content-footer"},[t("p",{staticClass:"page-login--content-footer-copyright"})])}],a=(s("ed70"),s("67b1")),n=s.n(a),o=s("7736"),l=s("1353"),d=(s("d017"),{mixins:[l["a"]],data(){return{newmenu:[],topmenu:[],allmenu:[],loginType:1,saidemenu_lei:[],saidemenu_lei2:[],saidemenu_lei3:[],checked:!0,timeInterval:null,time:n()().format("HH:mm:ss"),dialogVisible:!1,users:[{name:"",username:"",password:""},{name:"",username:"",password:""},{name:"",username:"",password:""}],formLogin:{username:"",password:"",code:""},rules:{username:[{required:!0,message:"请输入手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},data_menu:[{icon:null,id:5,mod_order:0,parent_id:0,path:"/index",title:"首页"},{icon:null,id:5,mod_order:1,parent_id:0,path:"/paper",title:"数据管理"},{icon:null,id:5,mod_order:2,parent_id:0,path:"/muban",title:"模板管理"},{icon:null,id:5,mod_order:3,parent_id:0,path:"/company",title:"单位管理"},{children:[{icon:null,id:2,mod_order:1,parent_id:1,path:"/system/user",title:"用户管理"},{icon:null,id:3,mod_order:2,parent_id:1,path:"/system/role",title:"角色管理"},{icon:null,id:4,mod_order:3,parent_id:1,path:"/system/module",title:"模块管理"}],icon:null,id:1,mod_order:9,parent_id:0,path:"/system",redirect:"/system/user",title:"系统管理"}]}},mounted(){this.timeInterval=setInterval(()=>{this.refreshTime()},1e3)},beforeDestroy(){clearInterval(this.timeInterval),this.timeInterval=null},watch:{checked:{handler(e,t){if(e){localStorage.setItem("username",this.formLogin.username),localStorage.setItem("password",this.formLogin.password);var s=localStorage.getItem("username"),i=localStorage.getItem("password");this.formLogin.username=s,this.formLogin.password=i}else localStorage.setItem("username",""),localStorage.setItem("password","")},immediate:!0,deep:!0}},methods:{...Object(o["b"])("d2admin/account",["logins"]),refreshTime(){this.time=n()().format("HH:mm:ss")},handleUserBtnClick(e){this.formLogin.username=e.username,this.formLogin.password=e.password,this.submit()},submit(){this.$refs.loginForm.validate(e=>{e?this.logins({account:this.formLogin.username,password:this.formLogin.password}).then(e=>{console.log(e,"newssss"),this.data_menu.map(e=>{this.allmenu.push(e)}),localStorage.setItem("allmenu",JSON.stringify(this.allmenu)),this.huoqucaidan(),this.$router.push({path:"/"})}):this.$message.error("表单校验失败，请检查")})},huoqucaidan(){this.allmenu&&(this.allmenu.map(e=>{"/system"==e.path&&(this.saidemenu_lei2=e.children,localStorage.setItem("saidemenu_lei2",JSON.stringify(this.saidemenu_lei2))),"/exam"==e.path&&(this.saidemenu_lei=e.children,console.log(this.saidemenu_lei,"saidemenu_leisaidemenu_lei"),localStorage.setItem("saidemenu_lei",JSON.stringify(this.saidemenu_lei))),"/agency"==e.path&&(this.saidemenu_lei3=e.children,console.log(this.saidemenu_lei3,"saidemenu_leisaidemenu_lei3"),localStorage.setItem("saidemenu_lei3",JSON.stringify(this.saidemenu_lei3))),this.topmenu.push(e),this.topmenu.map(e=>{e.children&&delete e.children})}),this.newmenu=[...new Set(this.topmenu)],localStorage.setItem("newmenu",JSON.stringify(this.newmenu)),this.$store.commit("d2admin/menu/headerSet",JSON.parse(localStorage.getItem("newmenu"))))},forgetPwd(){this.$router.push({path:"/find",query:{loginType:this.loginType}})},registerUser(){this.$router.push({path:"/register",query:{loginType:this.loginType}})}}}),m=d,c=(s("d84b"),s("e607")),u=function(e){e.options.__source="src/views/system/login/index.vue"},p=u,g=Object(c["a"])(m,i,r,!1,null,"5cdf1e63",null);"function"===typeof p&&p(g);t["default"]=g.exports},d84b:function(e,t,s){"use strict";s("b5d8")}}]);